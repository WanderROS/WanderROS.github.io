<!DOCTYPE html>



  


<html class="theme-next mist use-motion" lang="zh-Hans">
<head>
  <meta charset="UTF-8"/>
<meta http-equiv="X-UA-Compatible" content="IE=edge" />
<meta name="viewport" content="width=device-width, initial-scale=1, maximum-scale=1"/>
<meta name="theme-color" content="#222">


<script src="//cdn.bootcss.com/pace/1.0.2/pace.min.js"></script>
<link href="//cdn.bootcss.com/pace/1.0.2/themes/pink/pace-theme-flash.css" rel="stylesheet">
<style>
    .pace .pace-progress {
        background: #1E92FB; /*进度条颜色*/
        height: 3px;
    }
    .pace .pace-progress-inner {
         box-shadow: 0 0 10px #1E92FB, 0 0 5px     #1E92FB; /*阴影颜色*/
    }
    .pace .pace-activity {
        border-top-color: #1E92FB;    /*上边框颜色*/
        border-left-color: #1E92FB;    /*左边框颜色*/
    }
</style>




<script>
    (function () {
        if ('') {
            if (prompt('Please input Password:') !== '') {
                alert('Password Error！');
                if (history.length === 1) {
                    location.replace("https://wanderros.github.io/"); // 这里替换成你的首页
                } else {
                    history.back();
                }
            }
        }
    })();
</script>





<meta http-equiv="Cache-Control" content="no-transform" />
<meta http-equiv="Cache-Control" content="no-siteapp" />
















  
  
  <link href="/lib/fancybox/source/jquery.fancybox.css?v=2.1.5" rel="stylesheet" type="text/css" />







<link href="/lib/font-awesome/css/font-awesome.min.css?v=4.6.2" rel="stylesheet" type="text/css" />

<link href="/css/main.css?v=5.1.4" rel="stylesheet" type="text/css" />


  <link rel="apple-touch-icon" sizes="180x180" href="/images/favicon.ico?v=5.1.4">


  <link rel="icon" type="image/png" sizes="32x32" href="/images/favicon.ico?v=5.1.4">


  <link rel="icon" type="image/png" sizes="16x16" href="/images/favicon.ico?v=5.1.4">


  <link rel="mask-icon" href="/images/favicon.ico?v=5.1.4" color="#222">


  <link rel="manifest" href="/images/manifest.json">


  <meta name="msapplication-config" content="/images/browserconfig.xml" />



  <meta name="keywords" content="Java," />




  


  <link rel="alternate" href="/atom.xml" title="WanderROS'S Daily" type="application/atom+xml" />






<meta name="description" content="简介Java在编程界到我工作的时候都是出于霸主地位，尽管机器学习、深度学习技术的兴起到火爆，Java的霸主地位一直没有改变过，只是Python语言的火热度爆发式上涨。Python的学习持续着，当然工作需要，Java还是深入学习！ 推荐书籍：《Java8实战》· [英] Raoul-Gabriel Urma [意] Mario Fusco [英] Alan Mycroft 著 陆明刚 劳佳 译  开">
<meta property="og:type" content="article">
<meta property="og:title" content="Java Base_0">
<meta property="og:url" content="https://wanderros.github.io/2020/05/17/Java-Base-0/index.html">
<meta property="og:site_name" content="WanderROS&#39;S Daily">
<meta property="og:description" content="简介Java在编程界到我工作的时候都是出于霸主地位，尽管机器学习、深度学习技术的兴起到火爆，Java的霸主地位一直没有改变过，只是Python语言的火热度爆发式上涨。Python的学习持续着，当然工作需要，Java还是深入学习！ 推荐书籍：《Java8实战》· [英] Raoul-Gabriel Urma [意] Mario Fusco [英] Alan Mycroft 著 陆明刚 劳佳 译  开">
<meta property="og:image" content="https://app.yinxiang.com/FileSharing.action?hash=1/e4f989c475a572d4e441167070f4c9b5-70964">
<meta property="og:image" content="https://app.yinxiang.com/FileSharing.action?hash=1/14d94bed05a85dc2cc691cd270e24cdd-43403">
<meta property="og:image" content="https://app.yinxiang.com/FileSharing.action?hash=1/22583f12ca5f51790b33d8b7cc99a616-52378">
<meta property="og:image" content="https://app.yinxiang.com/FileSharing.action?hash=1/5e5b69f66c9a66af02bf659e14c43b56-60025">
<meta property="og:image" content="https://app.yinxiang.com/FileSharing.action?hash=1/cae1c2368492a1371ab5b823b63db2f2-68949">
<meta property="og:image" content="https://app.yinxiang.com/FileSharing.action?hash=1/7d1ee84b2e065f0cbfafd944fc72c8ca-18822">
<meta property="og:image" content="https://app.yinxiang.com/FileSharing.action?hash=1/52009a6e2007d242cbf8d94ef284d61b-20736">
<meta property="og:image" content="https://app.yinxiang.com/FileSharing.action?hash=1/e0afc65801ccc42a14d7c3cbb9c951ec-19488">
<meta property="og:image" content="https://app.yinxiang.com/FileSharing.action?hash=1/4e2808b87e1da5e0d16f7f641ad7ce81-40497">
<meta property="og:image" content="https://app.yinxiang.com/FileSharing.action?hash=1/3204a9b1af9f0237ea20e4998e3ec7fd-12412">
<meta property="og:image" content="https://app.yinxiang.com/FileSharing.action?hash=1/2bc48aafc0ccd7c4da4fa98b9a68d776-18372">
<meta property="og:image" content="https://app.yinxiang.com/FileSharing.action?hash=1/d172e52728a76ae65c1887c4e1de72cd-156654">
<meta property="og:image" content="https://app.yinxiang.com/FileSharing.action?hash=1/8088ee4d9551b61a6704444fc86a66fd-42668">
<meta property="og:image" content="https://app.yinxiang.com/FileSharing.action?hash=1/285cec4fca970db1d7ddb67afde7d1ef-200727">
<meta property="og:image" content="https://app.yinxiang.com/FileSharing.action?hash=1/b50ed15bf81b49721d5ede231f06d719-258618">
<meta property="og:image" content="https://app.yinxiang.com/FileSharing.action?hash=1/ad8f0bcdef088a84af6bc34296a4cb0c-42455">
<meta property="og:image" content="https://app.yinxiang.com/FileSharing.action?hash=1/7a32b13d36fdbc50963cef4598a4bf92-205204">
<meta property="og:image" content="https://app.yinxiang.com/FileSharing.action?hash=1/00bb6b0c7bd2010a476578b199154dd9-79858">
<meta property="og:image" content="https://app.yinxiang.com/FileSharing.action?hash=1/b98a383583bf7527644378d45e48904d-20376">
<meta property="og:image" content="https://app.yinxiang.com/FileSharing.action?hash=1/0390f025c929efd15ed61c50d3412ca0-49298">
<meta property="og:image" content="https://app.yinxiang.com/FileSharing.action?hash=1/e21c5ded98e207028ef0df38be453324-47442">
<meta property="og:image" content="https://app.yinxiang.com/FileSharing.action?hash=1/e41bcd2e66a9178153e01f1f962151a2-121716">
<meta property="og:image" content="https://app.yinxiang.com/FileSharing.action?hash=1/391a8cf3369155b81c6ec5d36847c61d-79554">
<meta property="og:image" content="https://app.yinxiang.com/FileSharing.action?hash=1/c523ac453ead8a619eb11a7628276ae4-21817">
<meta property="og:image" content="https://app.yinxiang.com/FileSharing.action?hash=1/202899e4127e7cfbc9a8da77c04d63fc-50130">
<meta property="og:image" content="https://app.yinxiang.com/FileSharing.action?hash=1/b5d70777f971a08a86b9c9777c706d46-39054">
<meta property="article:published_time" content="2020-05-17T01:23:22.000Z">
<meta property="article:modified_time" content="2020-10-01T08:52:15.866Z">
<meta property="article:author" content="WanderROS">
<meta property="article:tag" content="Java">
<meta name="twitter:card" content="summary">
<meta name="twitter:image" content="https://app.yinxiang.com/FileSharing.action?hash=1/e4f989c475a572d4e441167070f4c9b5-70964">



<script type="text/javascript" id="hexo.configurations">
  var NexT = window.NexT || {};
  var CONFIG = {
    root: '/',
    scheme: 'Mist',
    version: '5.1.4',
    sidebar: {"position":"left","display":"post","offset":12,"b2t":false,"scrollpercent":true,"onmobile":false},
    fancybox: true,
    tabs: true,
    motion: {"enable":true,"async":false,"transition":{"post_block":"fadeIn","post_header":"slideDownIn","post_body":"slideDownIn","coll_header":"slideLeftIn","sidebar":"slideUpIn"}},
    duoshuo: {
      userId: '0',
      author: '博主'
    },
    algolia: {
      applicationID: '',
      apiKey: '',
      indexName: '',
      hits: {"per_page":10},
      labels: {"input_placeholder":"Search for Posts","hits_empty":"We didn't find any results for the search: ${query}","hits_stats":"${hits} results found in ${time} ms"}
    }
  };
</script>



  <link rel="canonical" href="https://wanderros.github.io/2020/05/17/Java-Base-0/"/>





  <title>Java Base_0 | WanderROS'S Daily</title>
  








<meta name="generator" content="Hexo 4.2.0"></head>

<body itemscope itemtype="http://schema.org/WebPage" lang="zh-Hans">

  
  
    
  

  <div class="container sidebar-position-left page-post-detail">
    <div class="headband"></div>

<a href="https://github.com/WanderROS" target="_blank" rel="noopener" class="github-corner" aria-label="View source on GitHub"><svg width="80" height="80" viewBox="0 0 250 250" style="fill:#151513; color:#fff; position: absolute; top: 0; border: 0; right: 0;" aria-hidden="true"><path d="M0,0 L115,115 L130,115 L142,142 L250,250 L250,0 Z"></path><path d="M128.3,109.0 C113.8,99.7 119.0,89.6 119.0,89.6 C122.0,82.7 120.5,78.6 120.5,78.6 C119.2,72.0 123.4,76.3 123.4,76.3 C127.3,80.9 125.5,87.3 125.5,87.3 C122.9,97.6 130.6,101.9 134.4,103.2" fill="currentColor" style="transform-origin: 130px 106px;" class="octo-arm"></path><path d="M115.0,115.0 C114.9,115.1 118.7,116.5 119.8,115.4 L133.7,101.6 C136.9,99.2 139.9,98.4 142.2,98.6 C133.8,88.0 127.5,74.4 143.8,58.0 C148.5,53.4 154.0,51.2 159.7,51.0 C160.3,49.4 163.2,43.6 171.4,40.1 C171.4,40.1 176.1,42.5 178.8,56.2 C183.1,58.6 187.2,61.8 190.9,65.4 C194.5,69.0 197.7,73.2 200.1,77.6 C213.8,80.2 216.3,84.9 216.3,84.9 C212.7,93.1 206.9,96.0 205.4,96.6 C205.1,102.4 203.0,107.8 198.3,112.5 C181.9,128.9 168.3,122.5 157.7,114.1 C157.9,116.9 156.7,120.9 152.7,124.9 L141.0,136.5 C139.8,137.7 141.6,141.9 141.8,141.8 Z" fill="currentColor" class="octo-body"></path></svg></a><style>.github-corner:hover .octo-arm{animation:octocat-wave 560ms ease-in-out}@keyframes octocat-wave{0%,100%{transform:rotate(0)}20%,60%{transform:rotate(-25deg)}40%,80%{transform:rotate(10deg)}}@media (max-width:500px){.github-corner:hover .octo-arm{animation:none}.github-corner .octo-arm{animation:octocat-wave 560ms ease-in-out}}</style>


    <header id="header" class="header" itemscope itemtype="http://schema.org/WPHeader">
      <div class="header-inner"><div class="site-brand-wrapper">
  <div class="site-meta ">
    

    <div class="custom-logo-site-title">
      <a href="/"  class="brand" rel="start">
        <span class="logo-line-before"><i></i></span>
        <span class="site-title">WanderROS'S Daily</span>
        <span class="logo-line-after"><i></i></span>
      </a>
    </div>
      
        <p class="site-subtitle"></p>
      
  </div>

  <div class="site-nav-toggle">
    <button>
      <span class="btn-bar"></span>
      <span class="btn-bar"></span>
      <span class="btn-bar"></span>
    </button>
  </div>
</div>

<nav class="site-nav">
  

  
    <ul id="menu" class="menu">
      
        
        <li class="menu-item menu-item-home">
          <a href="/" rel="section">
            
              <i class="menu-item-icon fa fa-fw fa-home"></i> <br />
            
            首页
          </a>
        </li>
      
        
        <li class="menu-item menu-item-archives">
          <a href="/archives" rel="section">
            
              <i class="menu-item-icon fa fa-fw fa-archive"></i> <br />
            
            归档
          </a>
        </li>
      
        
        <li class="menu-item menu-item-categories">
          <a href="/categories" rel="section">
            
              <i class="menu-item-icon fa fa-fw fa-th"></i> <br />
            
            分类
          </a>
        </li>
      
        
        <li class="menu-item menu-item-tags">
          <a href="/tags" rel="section">
            
              <i class="menu-item-icon fa fa-fw fa-tags"></i> <br />
            
            标签
          </a>
        </li>
      
        
        <li class="menu-item menu-item-足迹">
          <a href="/about" rel="section">
            
              <i class="menu-item-icon fa fa-fw fa-user"></i> <br />
            
            足迹
          </a>
        </li>
      

      
        <li class="menu-item menu-item-search">
          
            <a href="javascript:;" class="popup-trigger">
          
            
              <i class="menu-item-icon fa fa-search fa-fw"></i> <br />
            
            搜索
          </a>
        </li>
      
    </ul>
  

  
    <div class="site-search">
      
  <div class="popup search-popup local-search-popup">
  <div class="local-search-header clearfix">
    <span class="search-icon">
      <i class="fa fa-search"></i>
    </span>
    <span class="popup-btn-close">
      <i class="fa fa-times-circle"></i>
    </span>
    <div class="local-search-input-wrapper">
      <input autocomplete="off"
             placeholder="搜索..." spellcheck="false"
             type="text" id="local-search-input">
    </div>
  </div>
  <div id="local-search-result"></div>
</div>



    </div>
  
</nav>



 </div>
    </header>

    <main id="main" class="main">
      <div class="main-inner">
        <div class="content-wrap">
          <div id="content" class="content">
            

  <div id="posts" class="posts-expand">
    

  

  
  
  

  <article class="post post-type-normal" itemscope itemtype="http://schema.org/Article">
  
  
  
  <div class="post-block">
    <link itemprop="mainEntityOfPage" href="https://wanderros.github.io/2020/05/17/Java-Base-0/">

    <span hidden itemprop="author" itemscope itemtype="http://schema.org/Person">
      <meta itemprop="name" content="WanderROS">
      <meta itemprop="description" content="">
      <meta itemprop="image" content="/images/avatar.jpg">
    </span>

    <span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="WanderROS'S Daily">
    </span>

    
      <header class="post-header">

        
        
          <h1 class="post-title" itemprop="name headline">Java Base_0</h1>
        

        <div class="post-meta">
          <span class="post-time">
            
              <span class="post-meta-item-icon">
                <i class="fa fa-calendar-o"></i>
              </span>
              
                <span class="post-meta-item-text">发表于</span>
              
              <time title="创建于" itemprop="dateCreated datePublished" datetime="2020-05-17T09:23:22+08:00">
                2020-05-17
              </time>
            

            

            
          </span>

          
            <span class="post-category" >
            
              <span class="post-meta-divider">|</span>
            
              <span class="post-meta-item-icon">
                <i class="fa fa-folder-o"></i>
              </span>
              
                <span class="post-meta-item-text">分类于</span>
              
              
                <span itemprop="about" itemscope itemtype="http://schema.org/Thing">
                  <a href="/categories/Java/" itemprop="url" rel="index">
                    <span itemprop="name">Java</span>
                  </a>
                </span>

                
                
              
            </span>
          

          
            
          

          
          

          

          

          

        </div>
      </header>
    

    
    
    
    <div class="post-body" itemprop="articleBody">

      
      

      
        <h1 id="简介"><a href="#简介" class="headerlink" title="简介"></a>简介</h1><p>Java在编程界到我工作的时候都是出于霸主地位，尽管机器学习、深度学习技术的兴起到火爆，Java的霸主地位一直没有改变过，只是Python语言的火热度爆发式上涨。Python的学习持续着，当然工作需要，Java还是深入学习！ <strong>推荐书籍：《Java8实战》· [英] Raoul-Gabriel Urma [意] Mario Fusco [英] Alan Mycroft 著 陆明刚 劳佳 译</strong></p>
<hr>
<h1 id="开始"><a href="#开始" class="headerlink" title="开始"></a>开始</h1><h2 id="注释"><a href="#注释" class="headerlink" title="注释"></a>注释</h2><p>Java的注释主要有三种方式：</p>
<ul>
<li><p>单行注释</p>
</li>
<li><p>多行注释</p>
</li>
<li><p>多行注释并生成java doc文档</p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// 单行注释</span></span><br><span class="line"></span><br><span class="line"><span class="comment">/*</span></span><br><span class="line"><span class="comment">    多行注释</span></span><br><span class="line"><span class="comment">*/</span></span><br><span class="line"></span><br><span class="line"><span class="comment">/**</span></span><br><span class="line"><span class="comment">*  多行注释，生成Java doc文档</span></span><br><span class="line"><span class="comment">*/</span></span><br></pre></td></tr></table></figure>

</li>
</ul>
<h2 id="public-class-amp-class"><a href="#public-class-amp-class" class="headerlink" title="public class &amp;class"></a>public class &amp;class</h2><ol>
<li>采用 public class 来声明 class，那么文件名必须和类名一致，如果文件名和类名不一致，将会出现错误；</li>
<li>采用 class 来声明类，文件名可以是任何合法的文件名称，文件名不需要和 class 类一致，但生成的 class 文件名称和类名一致， 不和原文件名称一致；</li>
<li>在一个 Java 文件中，可以声明多个类，但是只能有一个类采用 public class 进行声明！</li>
</ol>
<h2 id="数据类型"><a href="#数据类型" class="headerlink" title="数据类型"></a>数据类型</h2><ol>
<li>有两种数据类型：基本类型和引用类型</li>
<li>基本类型：<ul>
<li>数值类型</li>
<li>字符类型</li>
<li>布尔类型</li>
</ul>
</li>
<li>引用类型：<ul>
<li>数组</li>
<li>类</li>
<li>接口</li>
</ul>
</li>
</ol>
<h2 id="字符编码"><a href="#字符编码" class="headerlink" title="字符编码"></a>字符编码</h2><table>
<thead>
<tr>
<th>名称</th>
<th>说明</th>
</tr>
</thead>
<tbody><tr>
<td>ISO-8859-1</td>
<td>有称 latin-1,是国际化标准或组织 ISO 制定 的，主要为了西欧语言中的字符编码，和 ASCII 兼容</td>
</tr>
<tr>
<td>ASCII字符编码</td>
<td>采用一个字节编码，主要针对英文编码</td>
</tr>
<tr>
<td>GB2312/GBK/GB18030</td>
<td>主要是汉字编码，三种编码从容量上看是包含关系</td>
</tr>
<tr>
<td>unicode</td>
<td>Unicode 统一了全世界上的所有文字编码，unicode 有几种实现： UTF-8,UTF-16,UTF-32</td>
</tr>
</tbody></table>
<ul>
<li>java 中的 char 使用 utf-16 编码，所以 char 占用两个字节，可以存储中文；。</li>
</ul>
<h2 id="方法"><a href="#方法" class="headerlink" title="方法"></a>方法</h2><ol>
<li><p>方法是可以重复调用的代码块，通常是为了实现各种功能才去定义的；</p>
</li>
<li><p>定义格式：</p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">[方法修饰列表] 返回值类型 方法名(方法参数列表)</span><br><span class="line">&#123;</span><br><span class="line">    方法体</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<ul>
<li>方法修饰列表 ：public，protected，private，abstract，static，final，synchronized，其中 public，protected，private 不能同时存在</li>
<li>返回值类型：如果没有返回值使用 void 关键字，如果存在返回值可以是基本类型和引用类型，如果存在返回值，使用 return 语句。<strong>return 语句后面不能再执行语句，因为不可能会执行到，编译器会发生错误</strong></li>
<li>方法名：任意合法的标识符</li>
<li>方法参数列表：参数列表可以多个</li>
</ul>
</li>
<li><p>方法的重载和递归：</p>
<ol>
<li>重载：<ul>
<li>方法名相同</li>
<li>方法的参数类型，个数，顺序至少有一个不同</li>
<li>方法的返回类型可以不同（不依靠返回类型来区分重载）</li>
<li>方法的修饰符可以不同，因为方法重载和修饰符没有任何关系</li>
<li>方法重载只出现在同一个类中</li>
</ul>
</li>
<li>递归：指方法调用自身  </li>
</ol>
</li>
</ol>
<h2 id="Java8"><a href="#Java8" class="headerlink" title="Java8"></a>Java8</h2><ol>
<li><p>Java 8所做的改变，在许多方面比Java历史上任何一次改变都深远，，这些改变会让你编起程来更容易，用不着再写啰嗦的代码了；</p>
</li>
<li><p>Java8对于处理器的多核操作更加人性化，对于硬件的使用也更加优秀；</p>
</li>
<li><p>Java 8支持许多处理数据的并行操作，用更高级的方式表达想要的东西；</p>
</li>
<li><p>数据处理完全在库内部进行的思想叫作内部迭代；</p>
</li>
<li><p><strong>行为参数化就是可以帮助处理频繁变更的需求的一种软件开发模式</strong>，一个良好的原则是在编写类似的代码之后，尝试将其抽象化；</p>
</li>
<li><p>对需求选择进行标准建模，根据需要的属性来定义一个返回boolean的函数，这种类型的函数称为<strong>谓词</strong>，这种设计方式对应着设计模式中的<strong>策略设计模式</strong>；</p>
<p><img src="https://app.yinxiang.com/FileSharing.action?hash=1/e4f989c475a572d4e441167070f4c9b5-70964" alt=""></p>
</li>
<li><p>参数模式比较：</p>
<p><img src="https://app.yinxiang.com/FileSharing.action?hash=1/14d94bed05a85dc2cc691cd270e24cdd-43403" alt=""></p>
</li>
</ol>
<h2 id="Lambda"><a href="#Lambda" class="headerlink" title="Lambda"></a>Lambda</h2><ol>
<li><p>可以把Lambda表达式理解为简洁地表示可传递的匿名函数的一种方式：没有名称，但有参数列表、函数主体、返回类型，可能还有一个可以抛出的异常列表；</p>
</li>
<li><p>Lambda表达式有三个部分：</p>
<ul>
<li>参数列表</li>
<li>箭头——箭头-&gt;把参数列表与Lambda主体分隔开</li>
<li>Lambda主体</li>
</ul>
</li>
<li><p>Lambda的基本语法：</p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// 方法1</span></span><br><span class="line">(parameters) -&gt; expression</span><br><span class="line"><span class="comment">// 方法2</span></span><br><span class="line">(parameters) -&gt; &#123; statements; &#125;</span><br></pre></td></tr></table></figure>
</li>
<li><p>函数式接口就是只定义一个抽象方法的接口：</p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">interface</span> <span class="title">Predicate</span>&lt;<span class="title">T</span>&gt;</span>&#123;</span><br><span class="line">  <span class="function"><span class="keyword">boolean</span> <span class="title">test</span> <span class="params">(T t)</span></span>; </span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<ul>
<li>接口现在还可以拥有默认方法，在类没有对方法进行实现时，其主体为方法提供默认实现的方法</li>
<li>哪怕有很多默认方法，只要接口只定义了一个抽象方法，就仍然是一个函数式接口</li>
<li>Lambda表达式允许你直接内联，为函数式接口的抽象方法提供实现，并且将整个表达式作为函数式接口的一个实例</li>
</ul>
</li>
<li><p>Lambda表达式允许直接以内联的形式为函数式接口的抽象方法提供实现，并把整个表达式作为函数式接口的实例；</p>
</li>
<li><p>函数式接口的抽象方法（函数描述符）的签名基本上就是Lambda表达式的签名，签名必须匹配，否则会报错：</p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"><span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">process</span><span class="params">(Runnable r)</span></span>&#123;</span><br><span class="line">  r.run();</span><br><span class="line">&#125;</span><br><span class="line">process(() -&gt; System.out.println(<span class="string">"This is awesome!!"</span>));</span><br></pre></td></tr></table></figure>

<ul>
<li>大多数Java程序员都已经熟悉了具有一个抽象方法的接口的理念，这样来设定只有在需要函数式接口的时候才可以传递Lambda！</li>
<li><strong>语言的设计者也考虑过其他办法，但是都没有使用Lambda方式自然且能避免语言变得更复杂</strong></li>
</ul>
</li>
<li><p>@FunctionalInterface的标注用于表示该接口会设计成一个函数式接口，如果用@FunctionalInterface定义了一个接口，而它却不是函数式接口的话，编译器将返回一个提示原因的错误，虽然不是必须的，但是建议定义函数式接口时加上该标注；</p>
</li>
<li><p>Java 8的库设计师在java.util.function包中引入了几个新的函数式接口：</p>
<ul>
<li><p>java.util.function.Predicate<T>接口定义了一个名叫test的抽象方法，它接受泛型T对象，并返回一个boolean</p>
</li>
<li><p>java.util.function.Consumer<T> 定义了一个名叫 accept 的抽象方法， 它接受泛型 T的对象，没有返回（void）</p>
</li>
<li><p>java.util.function.Function&lt;T, R&gt;接口定义了一个叫作apply的方法，它接受一个泛型T的对象，并返回一个泛型R的对象</p>
</li>
<li><p>注意：(T,U) -&gt; R的表达方式展示了应当如何思考一个函数描述符</p>
<p><img src="https://app.yinxiang.com/FileSharing.action?hash=1/22583f12ca5f51790b33d8b7cc99a616-52378" alt=""></p>
<p><img src="https://app.yinxiang.com/FileSharing.action?hash=1/5e5b69f66c9a66af02bf659e14c43b56-60025" alt=""></p>
</li>
</ul>
</li>
<li><p>泛型只能绑定到引用类型，这是由泛型内部的实现方式造成的，在Java里有一个将原始类型转换为对应的引用类型的机制（装箱，boxing），将引用类型转换为对应的原始类型，叫作拆箱（unboxing），提供了一个自动装箱机制来帮助程序员执行这一任务；</p>
</li>
<li><p>捕获Lambda：允许使用自由变量（在外层作用域中定义的变量），就像匿名类一样，但是有限制：</p>
<ul>
<li>可以没有限制地捕获实例变量和静态变量</li>
<li>局部变量必须显式声明为final（实例变量都存储在堆中，而局部变量则保存在栈上）</li>
</ul>
</li>
<li><p>闭包就是一个函数的实例，且它可以无限制地访问那个函数的非本地变量：</p>
<ul>
<li>闭包可以作为参数传递给另一个函数</li>
<li>可以访问和修改其作用域之外的变量</li>
<li>注意：Java 8的Lambda和匿名类可以做类似于闭包的事情，但是不能修改定义Lambda的方法的局部变量的内容</li>
</ul>
</li>
<li><p><strong>方法引用</strong>：可以重复使用现有的方法定义，并像Lambda一样传递它们</p>
<ul>
<li><p>方法引用可以被看作仅仅调用特定方法的Lambda的一种快捷写法；</p>
</li>
<li><p>Apple::getWeight就是引用了Apple类中定义的方法getWeight，不需要括号，因为没有实际调用这个方法；</p>
</li>
<li><p>方法引用主要有三类：</p>
<ul>
<li><p>指向静态方法的方法引用（例如Integer的parseInt方法，写作Integer::parseInt）</p>
</li>
<li><p>指向任意类型实例方法的方法引用 （ 例如 String的 length 方法 ， 写作 String::length）</p>
</li>
<li><p>指向现有对象的实例方法的方法引用</p>
<p><img src="https://app.yinxiang.com/FileSharing.action?hash=1/cae1c2368492a1371ab5b823b63db2f2-68949" alt=""></p>
</li>
</ul>
</li>
<li><p>注意：还有针对构造函数、数组构造函数和父类调用（super-call）的一些特殊形式的方法引用</p>
</li>
</ul>
</li>
</ol>
<h2 id="高效Java-8-编程"><a href="#高效Java-8-编程" class="headerlink" title="高效Java 8 编程"></a>高效Java 8 编程</h2><ol>
<li><p>大多数情况下都没有机会从头开始一个全新的项目，很多时候，不得不面对的是用老版Java接口编写的遗留代码！</p>
</li>
<li><p>改善可读性意味着你要确保你的代码能非常容易地被包括自己在内的所有人理解和维护：</p>
<ul>
<li>减少冗长的代码</li>
<li>通过方法引用和Stream API，直观化代码</li>
</ul>
</li>
<li><p>增加代码的灵活性：</p>
<ul>
<li>采用函数接口</li>
<li>有条件的延迟执行</li>
<li>环绕执行</li>
</ul>
</li>
<li><p>对设计经验的归纳总结被称为<strong>设计模式</strong>，可以复用这些方式方法来解决一些常见问题：</p>
<ul>
<li><strong>访问者模式</strong>常用于分离程序的算法和它的操作对象</li>
<li><strong>单例模式</strong>一般用于限制类的实例化，仅生成一份对象</li>
</ul>
</li>
<li><p><strong>策略模式</strong>代表了解决一类算法的通用解决方案，可以在运行时选择使用哪种方案，包含三部分内容：</p>
<ul>
<li>一个代表某个算法的接口</li>
<li>一个或多个该接口的具体实现，它们代表了算法的多种实现</li>
<li>一个或多个使用策略对象的客户</li>
</ul>
<p><img src="https://app.yinxiang.com/FileSharing.action?hash=1/7d1ee84b2e065f0cbfafd944fc72c8ca-18822" alt=""></p>
</li>
<li><p>模板方法模式在“希望使用这个算法，但是需要对其中的某些行为进行改进，才能达到希望的效果”；</p>
</li>
<li><p><strong>观察者模式</strong>适用于某些事件发生时（比如状态转变），如果一个对象（通常我们称之为主题）需要自动地通知其他多个对象（称为观察者）</p>
<p><img src="https://app.yinxiang.com/FileSharing.action?hash=1/52009a6e2007d242cbf8d94ef284d61b-20736" alt=""></p>
</li>
<li><p><strong>责任链模式</strong>是一种创建处理对象序列（比如操作序列）的通用方案，一个处理对象可能需要在完成一些工作之后，将结果传递给另一个对象，这个对象接着做一些工作，再转交给下一个处理对象，以此类推；</p>
<p><img src="https://app.yinxiang.com/FileSharing.action?hash=1/e0afc65801ccc42a14d7c3cbb9c951ec-19488" alt=""></p>
</li>
<li><p><strong>工厂模式</strong>是无需向客户暴露实例化的逻辑就能完成对象的创建；</p>
</li>
<li><p>默认方法：（样例，isEmpty就有默认方法）</p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br></pre></td><td class="code"><pre><span class="line"> <span class="class"><span class="keyword">interface</span> <span class="title">Sized</span> </span>&#123;</span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">int</span> <span class="title">size</span><span class="params">()</span></span>;</span><br><span class="line">    <span class="function"><span class="keyword">default</span> <span class="keyword">boolean</span> <span class="title">isEmpty</span><span class="params">()</span> </span>&#123;</span><br><span class="line">        <span class="keyword">return</span> size() == <span class="number">0</span>;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">Size</span> <span class="keyword">implements</span> <span class="title">Sized</span></span>&#123;</span><br><span class="line">    <span class="meta">@Override</span></span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">int</span> <span class="title">size</span><span class="params">()</span></span></span><br><span class="line"><span class="function">    </span>&#123;</span><br><span class="line">        <span class="keyword">return</span> <span class="number">1</span>;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<ul>
<li>默认方法导致接口包含的方法签名在它的实现类中也可以不提供实现</li>
<li>默认方法由default修饰符修饰，并像类中声明的其他方法一样包含方法体</li>
<li>样任何一个实现了Sized接口的类都会自动继承isEmpty的实现，向提供了默认实现的接口添加方法就不是源码兼容的</li>
</ul>
</li>
<li><p>函数式接口只包含一个抽象方法，默认方法是种非抽象方法；通过默认方法方式，可以减少无效的模板代码，因为在接口里已经有一个默认的实现了；</p>
</li>
<li><p>注意：带有默认方法的单个抽象方法的接口是不属于函数式接口的；</p>
</li>
<li><p>Java的类只能继承单一的类，但是一个类可以实现多接口，默认方法可以帮助实现行为的多继承；</p>
<p><img src="https://app.yinxiang.com/FileSharing.action?hash=1/4e2808b87e1da5e0d16f7f641ad7ce81-40497" alt=""></p>
</li>
<li><p>声明为final的类不能被其他的类继承，避免发生不必要的复杂性，防止核心代码的功能被污染；</p>
</li>
<li><p>多接口继承会有可能出现一个类继承了多个方法而它们使用的却是同样的函数签名，解决这种问题的规则：</p>
<ol>
<li><strong><em>类中的方法优先级最高，类或父类中声明的方法的优先级高于任何声明为默认方法的优先级</em></strong></li>
<li><strong><em>如果无法依据第一条进行判断，那么子接口的优先级更高，函数签名相同时，优先选择拥有最具体实现的默认方法的接口，即如果B继承了A，那么B就比A更加具体</em></strong></li>
<li><strong><em>最后，如果还是无法判断，继承了多个接口的类必须通过显式覆盖和调用期望的方法，显式地选择使用哪一个默认方法的实现</em></strong></li>
</ol>
</li>
<li><p>样例1：</p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">package</span> UseAnotation;</span><br><span class="line"></span><br><span class="line"><span class="class"><span class="keyword">interface</span> <span class="title">A</span> </span>&#123;</span><br><span class="line">    <span class="function"><span class="keyword">default</span> <span class="keyword">void</span> <span class="title">hello</span><span class="params">()</span> </span>&#123;</span><br><span class="line">        System.out.println(<span class="string">"Hello from A"</span>);</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="class"><span class="keyword">interface</span> <span class="title">B</span> <span class="keyword">extends</span> <span class="title">A</span> </span>&#123;</span><br><span class="line">    <span class="meta">@Override</span></span><br><span class="line">    <span class="function"><span class="keyword">default</span> <span class="keyword">void</span> <span class="title">hello</span><span class="params">()</span> </span>&#123;</span><br><span class="line">        System.out.println(<span class="string">"Hello from B"</span>);</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">C</span> <span class="keyword">implements</span> <span class="title">B</span>, <span class="title">A</span> </span>&#123;</span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">void</span> <span class="title">main</span><span class="params">(String... args)</span> </span>&#123;</span><br><span class="line">        <span class="keyword">new</span> C().hello();</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="comment">// 输出：</span></span><br><span class="line"><span class="comment">// Hello from B</span></span><br></pre></td></tr></table></figure>

<p><img src="https://app.yinxiang.com/FileSharing.action?hash=1/3204a9b1af9f0237ea20e4998e3ec7fd-12412" alt=""></p>
</li>
<li><p>样例2：</p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">package</span> UseAnotation;</span><br><span class="line"></span><br><span class="line"><span class="class"><span class="keyword">interface</span> <span class="title">A</span> </span>&#123;</span><br><span class="line">    <span class="function"><span class="keyword">default</span> <span class="keyword">void</span> <span class="title">hello</span><span class="params">()</span> </span>&#123;</span><br><span class="line">        System.out.println(<span class="string">"Hello from A"</span>);</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="class"><span class="keyword">interface</span> <span class="title">B</span> <span class="keyword">extends</span> <span class="title">A</span> </span>&#123;</span><br><span class="line">    <span class="meta">@Override</span></span><br><span class="line">    <span class="function"><span class="keyword">default</span> <span class="keyword">void</span> <span class="title">hello</span><span class="params">()</span> </span>&#123;</span><br><span class="line">        System.out.println(<span class="string">"Hello from B"</span>);</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"> <span class="class"><span class="keyword">class</span> <span class="title">D</span> <span class="keyword">implements</span> <span class="title">A</span> </span>&#123;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">C</span> <span class="keyword">extends</span> <span class="title">D</span> <span class="keyword">implements</span> <span class="title">B</span>, <span class="title">A</span> </span>&#123;</span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">void</span> <span class="title">main</span><span class="params">(String... args)</span> </span>&#123;</span><br><span class="line">        <span class="keyword">new</span> C().hello();</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br><span class="line"><span class="comment">// 还是输出的 Hello from B</span></span><br><span class="line"><span class="comment">// 因为虽然有类D，但是没有实现覆盖</span></span><br></pre></td></tr></table></figure>

<p><img src="https://app.yinxiang.com/FileSharing.action?hash=1/2bc48aafc0ccd7c4da4fa98b9a68d776-18372" alt=""></p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">package</span> UseAnotation;</span><br><span class="line"></span><br><span class="line"><span class="class"><span class="keyword">interface</span> <span class="title">A</span> </span>&#123;</span><br><span class="line">    <span class="function"><span class="keyword">default</span> <span class="keyword">void</span> <span class="title">hello</span><span class="params">()</span> </span>&#123;</span><br><span class="line">        System.out.println(<span class="string">"Hello from A"</span>);</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="class"><span class="keyword">interface</span> <span class="title">B</span> <span class="keyword">extends</span> <span class="title">A</span> </span>&#123;</span><br><span class="line">    <span class="meta">@Override</span></span><br><span class="line">    <span class="function"><span class="keyword">default</span> <span class="keyword">void</span> <span class="title">hello</span><span class="params">()</span> </span>&#123;</span><br><span class="line">        System.out.println(<span class="string">"Hello from B"</span>);</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"> <span class="class"><span class="keyword">class</span> <span class="title">D</span> <span class="keyword">implements</span> <span class="title">A</span> </span>&#123;</span><br><span class="line">     <span class="meta">@Override</span></span><br><span class="line">     <span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">hello</span><span class="params">()</span> </span>&#123;</span><br><span class="line">         System.out.println(<span class="string">"Hello from D"</span>);</span><br><span class="line">     &#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">C</span> <span class="keyword">extends</span> <span class="title">D</span> <span class="keyword">implements</span> <span class="title">B</span>, <span class="title">A</span> </span>&#123;</span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">void</span> <span class="title">main</span><span class="params">(String... args)</span> </span>&#123;</span><br><span class="line">        <span class="keyword">new</span> C().hello();</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br><span class="line"><span class="comment">// 有点不同</span></span><br><span class="line"><span class="comment">// 输出也不一样了</span></span><br><span class="line"><span class="comment">// Hello from D</span></span><br></pre></td></tr></table></figure>
</li>
<li><p>显示解决冲突：</p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">package</span> UseAnotation;</span><br><span class="line"></span><br><span class="line"><span class="class"><span class="keyword">interface</span> <span class="title">A</span> </span>&#123;</span><br><span class="line">    <span class="function"><span class="keyword">default</span> <span class="keyword">void</span> <span class="title">hello</span><span class="params">()</span> </span>&#123;</span><br><span class="line">        System.out.println(<span class="string">"Hello from A"</span>);</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="class"><span class="keyword">interface</span> <span class="title">B</span> <span class="keyword">extends</span> <span class="title">A</span> </span>&#123;</span><br><span class="line">    <span class="meta">@Override</span></span><br><span class="line">    <span class="function"><span class="keyword">default</span> <span class="keyword">void</span> <span class="title">hello</span><span class="params">()</span> </span>&#123;</span><br><span class="line">        System.out.println(<span class="string">"Hello from B"</span>);</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">D</span> <span class="keyword">implements</span> <span class="title">A</span> </span>&#123;</span><br><span class="line">    <span class="meta">@Override</span></span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">hello</span><span class="params">()</span> </span>&#123;</span><br><span class="line">        System.out.println(<span class="string">"Hello from D"</span>);</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">C</span> <span class="keyword">extends</span> <span class="title">D</span> <span class="keyword">implements</span> <span class="title">B</span>, <span class="title">A</span> </span>&#123;</span><br><span class="line">  <span class="comment">// 显式地选择调用接口B中的方法</span></span><br><span class="line">    <span class="meta">@Override</span></span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">hello</span><span class="params">()</span> </span>&#123;</span><br><span class="line">        B.<span class="keyword">super</span>.hello();</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">void</span> <span class="title">main</span><span class="params">(String... args)</span> </span>&#123;</span><br><span class="line">        <span class="keyword">new</span> C().hello();</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
</li>
<li><p>如果不能符合判断条件，即不能判断哪个更具体的话，那编译器会报错！</p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">/**</span></span><br><span class="line"><span class="comment">*出错的代码</span></span><br><span class="line"><span class="comment">*/</span></span><br><span class="line"><span class="keyword">package</span> UseAnotation;</span><br><span class="line"></span><br><span class="line"></span><br><span class="line"><span class="class"><span class="keyword">interface</span> <span class="title">A</span> </span>&#123;</span><br><span class="line">    <span class="function"><span class="keyword">default</span> <span class="keyword">void</span> <span class="title">hello</span><span class="params">()</span> </span>&#123;</span><br><span class="line">        System.out.println(<span class="string">"Hello from A"</span>);</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="class"><span class="keyword">interface</span> <span class="title">B</span> <span class="keyword">extends</span> <span class="title">A</span> </span>&#123;</span><br><span class="line"></span><br><span class="line">    <span class="function"><span class="keyword">default</span> <span class="keyword">void</span> <span class="title">hello</span><span class="params">()</span></span>&#123;</span><br><span class="line"></span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="class"><span class="keyword">interface</span> <span class="title">C</span> <span class="keyword">extends</span> <span class="title">A</span> </span>&#123;</span><br><span class="line"></span><br><span class="line">    <span class="function"><span class="keyword">default</span> <span class="keyword">void</span> <span class="title">hello</span><span class="params">()</span></span>&#123;</span><br><span class="line"></span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">D</span> <span class="keyword">implements</span> <span class="title">B</span>, <span class="title">C</span> </span>&#123;</span><br><span class="line"></span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">void</span> <span class="title">main</span><span class="params">(String[] args)</span> </span>&#123;</span><br><span class="line">        <span class="keyword">new</span> D().hello();</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line"></span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
</li>
<li><p>默认方法的优势：</p>
<ul>
<li>默认方法的出现能帮助库的设计者以后向兼容的方式演进API</li>
<li>默认方法可以用于创建可选方法和行为的多继承</li>
</ul>
</li>
</ol>
<h2 id="日期和时间API"><a href="#日期和时间API" class="headerlink" title="日期和时间API"></a>日期和时间API</h2><ol>
<li><p>java.time包中提供了很多新的类可以解决时间问题，如LocalDate、 LocalTime、 Instant、 Duration和Period；</p>
</li>
<li><p>LocalDate类的实例是一个不可变对象，它只提供了简单的日期，并不含当天的时间信息，提供了多种方法来读取常用的值，比如年份、月份、星期几等：</p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">import</span> java.time.DayOfWeek;</span><br><span class="line"><span class="keyword">import</span> java.time.LocalDate;</span><br><span class="line"><span class="keyword">import</span> java.time.Month;</span><br><span class="line"></span><br><span class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">localdate</span> </span>&#123;</span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">void</span> <span class="title">main</span><span class="params">(String[] args)</span> </span>&#123;</span><br><span class="line">        LocalDate date = LocalDate.of(<span class="number">2020</span>, <span class="number">5</span>, <span class="number">18</span>);</span><br><span class="line">        <span class="comment">//使用工厂方法从系统时钟获取当前日期</span></span><br><span class="line">        LocalDate today = LocalDate.now();</span><br><span class="line">        <span class="keyword">int</span> year = date.getYear();</span><br><span class="line">        Month month = date.getMonth();</span><br><span class="line">        <span class="keyword">int</span> day = date.getDayOfMonth();</span><br><span class="line">        DayOfWeek dow = date.getDayOfWeek();</span><br><span class="line">        <span class="keyword">int</span> len = date.lengthOfMonth();</span><br><span class="line">        <span class="keyword">boolean</span> leap = date.isLeapYear();</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
</li>
<li><p>LocalTime类可以实现时间的处理，提供时间相关的函数，可以使用of重载的两个工厂方法创建LocalTime的实例，LocalDate和LocalTime都可以通过解析代表它们的字符串创建：</p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">import</span> java.time.DayOfWeek;</span><br><span class="line"><span class="keyword">import</span> java.time.LocalDate;</span><br><span class="line"><span class="keyword">import</span> java.time.LocalTime;</span><br><span class="line"><span class="keyword">import</span> java.time.Month;</span><br><span class="line"></span><br><span class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">localdate</span> </span>&#123;</span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">void</span> <span class="title">main</span><span class="params">(String[] args)</span> </span>&#123;</span><br><span class="line">        LocalTime time = LocalTime.of(<span class="number">13</span>, <span class="number">45</span>, <span class="number">20</span>);</span><br><span class="line">        <span class="keyword">int</span> hour = time.getHour();</span><br><span class="line">        <span class="keyword">int</span> minute = time.getMinute();</span><br><span class="line">        <span class="keyword">int</span> second = time.getSecond();</span><br><span class="line">        LocalDate date = LocalDate.parse(<span class="string">"2014-03-18"</span>);</span><br><span class="line">        LocalTime time2 = LocalTime.parse(<span class="string">"13:45:20"</span>);</span><br><span class="line">        LocalTime time3 = LocalTime.now();</span><br><span class="line">        System.out.println(time3);</span><br><span class="line"></span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
</li>
<li><p>LocalDateTime是LocalDate和LocalTime的合体，同时表示了日期和时间，但不带有时区信息，可以直接创建，也可以通过合并日期和时间对象构造：</p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">import</span> java.time.*;</span><br><span class="line"></span><br><span class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">localdate</span> </span>&#123;</span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">void</span> <span class="title">main</span><span class="params">(String[] args)</span> </span>&#123;</span><br><span class="line">        LocalTime time = LocalTime.of(<span class="number">13</span>, <span class="number">45</span>, <span class="number">20</span>);</span><br><span class="line">        LocalDate date = LocalDate.parse(<span class="string">"2014-03-18"</span>);</span><br><span class="line">        LocalDateTime dt1 = LocalDateTime.of(<span class="number">2014</span>, Month.MARCH, <span class="number">18</span>, <span class="number">13</span>, <span class="number">45</span>, <span class="number">20</span>);</span><br><span class="line">        LocalDate date1 = dt1.toLocalDate();</span><br><span class="line">        LocalTime time1 = dt1.toLocalTime();</span><br><span class="line">        LocalDateTime dt2 = LocalDateTime.of(date, time);</span><br><span class="line">        LocalDateTime dt3 = date.atTime(<span class="number">13</span>, <span class="number">45</span>, <span class="number">20</span>);</span><br><span class="line">        LocalDateTime dt4 = date.atTime(time);</span><br><span class="line">        LocalDateTime dt5 = time.atDate(date);</span><br><span class="line">        System.out.println(date1);</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
</li>
<li><p>建模时间最自然的格式是表示一个持续时间段上某个点的单一大整型数，java.time.Instant类静态工厂方法ofEpochSecond传递一个代表秒数的值创建一个该类的实例：</p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"> System.out.println(Instant.ofEpochSecond(<span class="number">3</span>));</span><br><span class="line"><span class="comment">// 1970-01-01T00:00:03Z</span></span><br></pre></td></tr></table></figure>
</li>
<li><p>Duration类的静态工厂方法between方法可以返回一段时间，Period类可以以年、月或者日的方式对多个时间单位建模：</p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line">Duration d1 = Duration.between(time1, time2);</span><br><span class="line">   Duration d1 = Duration.between(dateTime1, dateTime2);</span><br><span class="line">   Duration d2 = Duration.between(instant1, instant2);</span><br><span class="line">Duration threeMinutes = Duration.ofMinutes(<span class="number">3</span>);</span><br><span class="line">Duration threeMinutes = Duration.of(<span class="number">3</span>, ChronoUnit.MINUTES);</span><br><span class="line">Period tenDays = Period.ofDays(<span class="number">10</span>);</span><br><span class="line">Period threeWeeks = Period.ofWeeks(<span class="number">3</span>);</span><br><span class="line">Period twoYearsSixMonthsOneDay = Period.of(<span class="number">2</span>, <span class="number">6</span>, <span class="number">1</span>);</span><br></pre></td></tr></table></figure>

<p><img src="https://app.yinxiang.com/FileSharing.action?hash=1/d172e52728a76ae65c1887c4e1de72cd-156654" alt=""></p>
<p><img src="https://app.yinxiang.com/FileSharing.action?hash=1/8088ee4d9551b61a6704444fc86a66fd-42668" alt=""></p>
</li>
<li><p>表示时间点的日期-时间类的通用方法：</p>
<p><img src="https://app.yinxiang.com/FileSharing.action?hash=1/285cec4fca970db1d7ddb67afde7d1ef-200727" alt=""></p>
</li>
<li><p>TemporalAdjuster类 ：</p>
<p><img src="https://app.yinxiang.com/FileSharing.action?hash=1/b50ed15bf81b49721d5ede231f06d719-258618" alt=""></p>
</li>
<li><p>处理日期和时间对象时，格式化以及解析日期时间对象是另一个非常重要的功能，java.time.format包就是特别为这个目的而设计的：</p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">import</span> java.time.*;</span><br><span class="line"><span class="keyword">import</span> java.time.format.DateTimeFormatter;</span><br><span class="line"></span><br><span class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">localdate</span> </span>&#123;</span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">void</span> <span class="title">main</span><span class="params">(String[] args)</span> </span>&#123;</span><br><span class="line">        LocalDate date = LocalDate.parse(<span class="string">"2020-05-18"</span>);</span><br><span class="line">        String s1 = date.format(DateTimeFormatter.BASIC_ISO_DATE);</span><br><span class="line">        String s2 = date.format(DateTimeFormatter.ISO_LOCAL_DATE);</span><br><span class="line">        System.out.println(s1);</span><br><span class="line">        System.out.println(s2);</span><br><span class="line"></span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
</li>
<li><p>时区的处理是新版日期和时间API新增加的重要功能，新的java.time.ZoneId类可以无需为时区处理的复杂和繁琐而操心，一旦得到一个ZoneId对象，就可以将它与LocalDate、 LocalDateTime或者是Instant对象整合起来，构造为一个ZonedDateTime实例：</p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line">LocalDate date = LocalDate.of(<span class="number">2014</span>, Month.MARCH, <span class="number">18</span>);</span><br><span class="line">ZonedDateTime zdt1 = date.atStartOfDay(romeZone);</span><br><span class="line">LocalDateTime dateTime = LocalDateTime.of(<span class="number">2014</span>, Month.MARCH, <span class="number">18</span>, <span class="number">13</span>, <span class="number">45</span>);</span><br><span class="line">ZonedDateTime zdt2 = dateTime.atZone(romeZone);</span><br><span class="line">Instant instant = Instant.now();</span><br><span class="line">ZonedDateTime zdt3 = instant.atZone(romeZone);</span><br></pre></td></tr></table></figure>
</li>
<li><p><strong>可以用绝对或者相对的方式操纵日期和时间，操作的结果总是返回一个新的实例，老的日期时间对象不会发生变化；</strong>     </p>
</li>
</ol>
<h2 id="Optional-amp-null"><a href="#Optional-amp-null" class="headerlink" title="Optional&amp;null"></a>Optional&amp;null</h2><ol>
<li><p>每次你不确定一个变量是否为null时，都需要添加一个进一步嵌套的if块，也增加了代码缩进的层数，不具备扩展性，同时还牺牲了代码的可读性！      </p>
</li>
<li><p>null 带来的问题：</p>
<ul>
<li>错误之源，NullPointerException是目前Java程序开发中最典型的异常  </li>
<li>会使代码膨胀，充斥着深度嵌套的null检查，代码的可读性糟糕透顶  </li>
<li>自身毫无意义，代表的是在静态类型语言中以一种错误的方式对缺失变量值的建模  </li>
<li>破坏了Java的哲学，Java一直试图避免让程序员意识到指针的存在，null指针  </li>
<li>在Java的类型系统上开了个口子，null并不属于任何类型，这意味着它可以被赋值给任意引用类型的变量  </li>
</ul>
</li>
<li><p>java.util.Optional&lt;T&gt;中的Optional类在变量存在时只是对类简单封装，变量不存在时，缺失的值会被建模成一个“空”的Optional对象，由方法Optional.empty()返回；</p>
</li>
<li><p>Optional.empty()方法是一个静态工厂方法，返回Optional类的特定单一实例，它是Optional类的一个有效对象，多种场景都能调用，不会触发 NullPointerException；    </p>
</li>
<li><p>在代码中始终如一地使用Optional，能非常清晰地界定出变量值的缺失是结构上的问题，还是算法上的缺陷，抑或是数据中的问题，引入Optional类的意图并非要消除每一个null引用；</p>
</li>
<li><p>创建 Optional 对象：</p>
<ol>
<li><p>声明一个空的Optional</p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">Optional&lt;Car&gt; optCar = Optional.empty();</span><br></pre></td></tr></table></figure>
</li>
<li><p>依据一个非空值创建Optional  </p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">Optional&lt;Car&gt; optCar = Optional.of(car);</span><br><span class="line"><span class="comment">// 如果car是一个null，这段代码会立即抛出一个NullPointerException</span></span><br></pre></td></tr></table></figure>
</li>
<li><p>可接受null的Optional  </p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">Optional&lt;Car&gt; optCar = Optional.ofNullable(car);</span><br><span class="line"><span class="comment">// 使用静态工厂方法Optional.ofNullable，你可以创建一个允许null值的Optional对象</span></span><br></pre></td></tr></table></figure>
</li>
</ol>
</li>
<li><p>使用 map 从 Optional 对象中提取和转换值 :</p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">Optional&lt;Insurance&gt; optInsurance = Optional.ofNullable(insurance);</span><br><span class="line">Optional&lt;String&gt; name = optInsurance.map(Insurance::getName);</span><br></pre></td></tr></table></figure>
</li>
<li><p>使用 flatMap 链接 Optional 对象，flatMap方法接受一个函数作为参数，这个函数的返回值是另一个流；</p>
</li>
<li><p>Optional的方法：</p>
<p><img src="https://app.yinxiang.com/FileSharing.action?hash=1/ad8f0bcdef088a84af6bc34296a4cb0c-42455" alt="">    </p>
<p><img src="https://app.yinxiang.com/FileSharing.action?hash=1/7a32b13d36fdbc50963cef4598a4bf92-205204" alt=""></p>
</li>
<li><p>使用Optional会迫使你更积极地解引用Optional对象，以应对变量值缺失的问题，最终，能更有效地防止代码中出现不期而至的空指针异常；</p>
</li>
<li><p>使用Optional能帮助你设计更好的API，用户只需要阅读方法签名，就能了解该方法是否接受一个Optional类型的值！   </p>
</li>
</ol>
<h1 id="流"><a href="#流" class="headerlink" title="流"></a>流</h1><h2 id="流的认识"><a href="#流的认识" class="headerlink" title="流的认识"></a>流的认识</h2><ol>
<li><p>几乎每个Java应用程序都会制造和处理集合,但是集合操作却远远算不上完美；</p>
</li>
<li><p><strong>流</strong>允许你以声明性方式处理数据集合，可以透明地并行处理而无需写任何多线程代码，为了利用多核架构并行执行只需要把stream()换成parallelStream()；</p>
</li>
<li><p><strong>Guava、Apache和lambdaj库</strong>：Guava是谷歌创建的一个很流行的库，提供了 multimaps 和 multisets 等额外的容器类，Apache Commons Collections库也提供了类似的功能，lambdaj库也提供了很多声明性操作集合的工具；</p>
</li>
<li><p>流：从支持数据处理操作的源生成的元素序列</p>
<ul>
<li>元素序列—可以访问特定元素类型的一组有序值</li>
<li>源—流会使用一个提供数据的源，如集合、数组或输入/输出资源</li>
<li>数据处理操作—流的数据处理功能支持类似于数据库的操作，以及函数式编程语言中的常用操作，如filter、map、reduce、find、match、sort等</li>
</ul>
</li>
<li><p>流操作的重要特点：</p>
<ul>
<li><p>流水线—很多流操作本身会返回一个流，这样多个操作就可以链接起来，形成一个大的流水线</p>
</li>
<li><p>内部迭代—流的迭代操作是在背后进行的</p>
<p><img src="https://app.yinxiang.com/FileSharing.action?hash=1/00bb6b0c7bd2010a476578b199154dd9-79858" alt=""></p>
</li>
</ul>
</li>
<li><p><strong>集合与流之间的差异就在于什么时候进行计算！</strong>集合是一个内存中的数据结构，集合中的每个元素都得先算出来才能添加到集合中；流则是在概念上固定的数据结构（你不能添加或删除元素），其元素则是按需计算的（流就像是一个延迟创建的集合）；</p>
</li>
<li><p>和迭代器类似，流只能遍历一次，遍历完之后，我们就说这个流已经被消费掉了，可以从原始数据源那里再获得一个新的流来重新遍历一遍，就像迭代器一样；</p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br></pre></td><td class="code"><pre><span class="line"> List&lt;String&gt; title = Arrays.asList(<span class="string">"Java8"</span>, <span class="string">"In"</span>, <span class="string">"Action"</span>);</span><br><span class="line"> Stream&lt;String&gt; s = title.stream();</span><br><span class="line"> s.forEach(System.out::println);</span><br><span class="line"> s.forEach(System.out::println);</span><br><span class="line"><span class="comment">// 流只能消费一次</span></span><br><span class="line"><span class="comment">/**</span></span><br><span class="line"><span class="comment">Exception in thread "main" java.lang.IllegalStateException: stream has already been operated upon or closed</span></span><br><span class="line"><span class="comment">	at java.base/java.util.stream.AbstractPipeline.sourceStageSpliterator(AbstractPipeline.java:279)</span></span><br><span class="line"><span class="comment">	at java.base/java.util.stream.ReferencePipeline$Head.forEach(ReferencePipeline.java:658)</span></span><br><span class="line"><span class="comment">	at UseAnotation.D.main(D.java:31)</span></span><br><span class="line"><span class="comment"></span></span><br><span class="line"><span class="comment">*/</span></span><br></pre></td></tr></table></figure>
</li>
<li><p>集合和流的另一个关键区别在于它们遍历数据的方式：使用Collection接口需要用户去做迭代（比如用for-each），这称为外部迭代；Streams库使用内部迭代，内部迭代时，项目可以透明地并行处理，或者用更优化的顺序进行处理；</p>
</li>
</ol>
<h2 id="流操作"><a href="#流操作" class="headerlink" title="流操作"></a>流操作</h2><ol>
<li><p>java.util.stream.Stream中的Stream接口定义了许多操作：</p>
<ul>
<li><p>可以连接起来的流操作称为<strong>中间操作</strong></p>
</li>
<li><p>关闭流的操作称为<strong>终端操作</strong></p>
<p><img src="https://app.yinxiang.com/FileSharing.action?hash=1/b98a383583bf7527644378d45e48904d-20376" alt=""></p>
</li>
</ul>
</li>
<li><p>诸如filter或sorted等中间操作会返回另一个流，多个操作可以连接起来形成一个查询，除非流水线上触发一个终端操作，否则中间操作不会执行任何处理，因为中间操作一般都可以合并起来，在终端操作时一次性全部处理（延迟处理）；</p>
<ul>
<li>有好几种优化利用了流的延迟性质</li>
</ul>
</li>
<li><p>终端操作会从流的流水线生成结果，其结果是任何不是流的值，比如List、Integer，甚至是void；</p>
</li>
<li><p>使用流一般包含三件事：</p>
<ul>
<li>一个数据源（如集合）来执行一个查询</li>
<li>一个中间操作链，形成一条流的流水线</li>
<li>一个终端操作，执行流水线，并能生成结果</li>
</ul>
</li>
<li><p>选择流中的元素：用谓词筛选，筛选出各不相同的元素，忽略流中的头几个元素，或将流截短至指定长度：</p>
<ol>
<li>Streams接口支持filter方法，接受一个谓词（一个返回 boolean 的函数）作为参数，并返回一个包括所有符合谓词的元素的流；</li>
<li>筛选各异的元素的distinct 方法会返回一个元素各异（根据流所生成元素的hashCode和equals方法实现）的流；</li>
<li>截短流的limit(n)方法会返回一个不超过给定长度的流，所需的长度作为参数传递给limit，最多会返回前n个元素；</li>
<li>跳过元素的skip(n)方法，返回一个扔掉了前n个元素的流，如果流中元素不足n个，则返回一空流；</li>
</ol>
</li>
<li><p>对流中每一个元素应用函数的map方法，会接受一个函数作为参数，这个函数会被应用到每个元素上，并将其映射成一个新的元素；</p>
</li>
<li><p>flatmap方法让你把一个流中的每个值都换成另一个流，然后把所有的流连接起来成为一个流；</p>
</li>
<li><p>查找和匹配：</p>
<ol>
<li>anyMatch方法可以回答“流中是否有一个元素能匹配给定的谓词”</li>
<li>allMatch方法的工作原理和anyMatch类似，但它会看流中的元素是否都能匹配给定的谓词</li>
<li>noneMatch可以确保流中没有任何元素与给定的谓词匹配</li>
<li>findAny方法将返回当前流中的任意元素，可以与其他流操作结合使用</li>
<li>findFirst方法找出第一个匹配的元素</li>
</ol>
</li>
<li><p>归约：（将流归约成一个值）</p>
<ol>
<li><p>使用reduce操作来表达更复杂的查询</p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">int</span> sum = numbers.stream().reduce(<span class="number">0</span>, (a, b) -&gt; a + b);</span><br><span class="line"><span class="comment">// 下面的方式也可以</span></span><br><span class="line"><span class="keyword">int</span> sum = numbers.stream().reduce(<span class="number">0</span>, Integer::sum);</span><br></pre></td></tr></table></figure>

<p><img src="https://app.yinxiang.com/FileSharing.action?hash=1/0390f025c929efd15ed61c50d3412ca0-49298" alt=""></p>
</li>
<li><p>最值：</p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">Optional&lt;Integer&gt; max = numbers.stream().reduce(Integer::max);</span><br><span class="line">Optional&lt;Integer&gt; min = numbers.stream().reduce(Integer::min);</span><br></pre></td></tr></table></figure>

<p><img src="https://app.yinxiang.com/FileSharing.action?hash=1/e21c5ded98e207028ef0df38be453324-47442" alt=""></p>
</li>
<li><p>map和reduce的连接通常称为map-reduce模式，因Google用它来进行网络搜索而出名，因为它很容易并行化；</p>
</li>
</ol>
<p><img src="https://app.yinxiang.com/FileSharing.action?hash=1/e41bcd2e66a9178153e01f1f962151a2-121716" alt=""></p>
</li>
<li><p>数值流：IntStream 、 DoubleStream 和LongStream，分别将流中的元素特化为int、long和double，从而避免了暗含的装箱成本，加速流的处理；</p>
<ol>
<li>将流转换为特化版本的常用方法是mapToInt、mapToDouble和mapToLong；</li>
<li>IntStream还支持其他的方便方法，如max、min、average等；</li>
<li>要把原始流转换成一般流可以使用boxed方法</li>
</ol>
</li>
<li><p>构建流：</p>
<ol>
<li><p>可以使用静态方法Stream.of，通过显式值创建一个流</p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">Stream&lt;String&gt; stream = Stream.of(<span class="string">"Java 8 "</span>, <span class="string">"Lambdas "</span>, <span class="string">"In "</span>, <span class="string">"Action"</span>); stream.map(String::toUpperCase).forEach(System.out::println);</span><br><span class="line"><span class="comment">// 空流</span></span><br><span class="line">Stream&lt;String&gt; emptyStream = Stream.empty();</span><br></pre></td></tr></table></figure>
</li>
<li><p>可以使用静态方法Arrays.stream从数组创建一个流，接受一个数组作为参数</p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">int</span>[] numbers = &#123;<span class="number">2</span>, <span class="number">3</span>, <span class="number">5</span>, <span class="number">7</span>, <span class="number">11</span>, <span class="number">13</span>&#125;; </span><br><span class="line"><span class="keyword">int</span> sum = Arrays.stream(numbers).sum();</span><br></pre></td></tr></table></figure>
</li>
<li><p>文件生成流：java.nio.file.Files 中的很多静态方法都会返回一个流，一个很有用的方法是Files.lines，它会返回一个由指定文件中的各行构成的字符串流；</p>
</li>
<li><p>函数生成流：Stream.iterate和Stream.generate，这两个操作可以创建所谓的无限流：不像从固定集合创建的流那样有固定大小的流</p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// 无限流，使用limit方法限制返回一个有限流</span></span><br><span class="line">Stream.iterate(<span class="number">0</span>, n -&gt; n + <span class="number">2</span>).limit(<span class="number">10</span>)</span><br><span class="line">                .forEach(System.out::println);</span><br></pre></td></tr></table></figure>

<ul>
<li>iterate 方法接受一个初始值（在这里是 0 ）， 还有一个依次应用在每个产生的新值上的Lambda</li>
</ul>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">Stream.iterate(<span class="keyword">new</span> <span class="keyword">int</span>[]&#123;<span class="number">0</span>, <span class="number">1</span>&#125;, t -&gt; <span class="keyword">new</span> <span class="keyword">int</span>[]&#123;t[<span class="number">1</span>], t[<span class="number">0</span>] + t[<span class="number">1</span>]&#125;)</span><br><span class="line">        .limit(<span class="number">20</span>)</span><br><span class="line">        .forEach(t -&gt; System.out.println(<span class="string">"("</span> + t[<span class="number">0</span>] + <span class="string">","</span> + t[<span class="number">1</span>] + <span class="string">")"</span>));</span><br></pre></td></tr></table></figure>

<ul>
<li><p>generate方法接受一个Supplier&lt;T&gt; （供应源）类型的Lambda提供新的值生成一个无限流</p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">Stream.generate(Math::random)</span><br><span class="line">               .limit(<span class="number">5</span>)</span><br><span class="line">               .forEach(System.out::println);</span><br></pre></td></tr></table></figure>
</li>
<li><p>供应源不一定是无状态的，可以创建存储状态的供应源，注意在并行代码中使用有状态的供应源是不安全的；</p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// 全是1 的生成流</span></span><br><span class="line">IntStream ones = IntStream.generate(() -&gt; <span class="number">1</span>);</span><br><span class="line"><span class="comment">//  裴波那契流</span></span><br><span class="line">        IntSupplier fib = <span class="keyword">new</span> IntSupplier() &#123;</span><br><span class="line">            <span class="keyword">private</span> <span class="keyword">int</span> previous = <span class="number">0</span>;</span><br><span class="line">            <span class="keyword">private</span> <span class="keyword">int</span> current = <span class="number">1</span>;</span><br><span class="line">            <span class="meta">@Override</span></span><br><span class="line">            <span class="function"><span class="keyword">public</span> <span class="keyword">int</span> <span class="title">getAsInt</span><span class="params">()</span> </span>&#123;</span><br><span class="line">                <span class="keyword">int</span> oldPrevious = <span class="keyword">this</span>.previous;</span><br><span class="line">                <span class="keyword">int</span> nextValue = <span class="keyword">this</span>.previous + <span class="keyword">this</span>.current;</span><br><span class="line">                <span class="keyword">this</span>.previous = <span class="keyword">this</span>.current;</span><br><span class="line">                <span class="keyword">this</span>.current = nextValue;</span><br><span class="line">                <span class="keyword">return</span> oldPrevious;</span><br><span class="line">            &#125;</span><br><span class="line"></span><br><span class="line">        &#125;;</span><br><span class="line">        IntStream.generate(fib).limit(<span class="number">10</span>).forEach(System.out::println);</span><br><span class="line"><span class="comment">// getAsInt在调用时会改变对象的状态，由此在每次调用时产生新的值</span></span><br></pre></td></tr></table></figure>
</li>
</ul>
</li>
<li><p>处理一个无限流必须使用limit操作来显示限制它的大小，否则终端操作将永远计算下去；</p>
</li>
</ol>
<h2 id="用流收集数据"><a href="#用流收集数据" class="headerlink" title="用流收集数据"></a>用流收集数据</h2><ol>
<li><p>对流调用collect方法将对流中的元素触发一个归约操作（由Collector来参数化），Collector会对元素应用一个转换函数，并将结果累积在一个数据结构中，从而产生这一过程的最终输出；</p>
</li>
<li><p>收集器：</p>
<ol>
<li><p>可以从Collectors类提供的工厂方法（例如groupingBy）创建的收集器，提供三大功能：</p>
<ul>
<li>将流元素归约和汇总为一个值</li>
<li>元素分组</li>
<li>元素分区</li>
</ul>
</li>
<li><p>使用Collectors.maxBy 和Collectors.minBy，来计算流中的最大或最小值，接收一个Comparator参数来比较流中的元素</p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">Comparator&lt;Dish&gt; dishCaloriesComparator = Comparator.comparingInt(Dish::getCalories);</span><br><span class="line"></span><br><span class="line">Optional&lt;Dish&gt; mostCalorieDish = menu.stream().collect(maxBy(dishCaloriesComparator));</span><br></pre></td></tr></table></figure>
</li>
<li><p>Collectors类专门为汇总提供了一个工厂方法：Collectors.summingInt可接受一个把对象映射为求和所需int的函数，并返回一个收集器,该收集器在传递给普通的collect方法后即执行我们需要的汇总操作</p>
</li>
<li><p>汇总不仅仅是求和Collectors.summingLong和Collectors.summingDouble方法,还有Collectors.averagingInt，连同对应的averagingLong和averagingDouble可以计算数值的平均数</p>
</li>
<li><p>可以使用summarizingInt工厂方法返回的收集器，得到总和、平均值、最大值、最小值；</p>
</li>
<li><p>joining工厂方法返回的收集器会把对流中每一个对象应用toString方法得到的所有字符串连接成一个字符串，有一个重载版本可以接受元素之间的分界符；</p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// 字符串以,分界</span></span><br><span class="line">String shortMenu = menu.stream().map(Dish::getName).collect(joining(<span class="string">", "</span>));</span><br></pre></td></tr></table></figure>
</li>
<li><p>所有收集器，都是一个可以用reducing工厂方法定义的归约过程的特殊情况而已，Collectors.reducing工厂方法是所有这些特殊情况的一般化；</p>
</li>
<li><p>用Collectors.groupingBy工厂方法返回的收集器可以完成数据的分组操作；可以使用一个由双参数版本的Collectors.groupingBy工厂方法创建收集器，可以进行二级分组；</p>
</li>
<li><p>分区由一个谓词（返回一个布尔值的函数）作为分类函数，它称分区函数；</p>
<ul>
<li>保留了分区函数返回true或false的两套流元素列表</li>
</ul>
</li>
<li><p>Collector接口包含了一系列方法，为实现具体的归约操作（即收集器）提供了范本，可以为Collector接口提供自己的实现，从而自由地创建自定义归约操作；</p>
<ul>
<li>开发自定义收集器可以在需要的时候实现自己的收集器，优化得到性能提升</li>
</ul>
</li>
</ol>
</li>
</ol>
<h2 id="并行数据处理"><a href="#并行数据处理" class="headerlink" title="并行数据处理"></a>并行数据处理</h2><ol>
<li><p>可以通过对收集源调用parallelStream方法来把集合转换为<strong>并行流</strong>（一个把内容分成多个数据块，并用不同的线程分别处理每个数据块的流），parallel()方法将过程转换成并行过程；</p>
<p><img src="https://app.yinxiang.com/FileSharing.action?hash=1/391a8cf3369155b81c6ec5d36847c61d-79554" alt=""></p>
</li>
<li><p>并行化并不是没有代价的，本身需要对流做递归划分，把每个子流的归纳操作分配到不同的线程，然后把这些操作的结果合并成一个值；</p>
<p><img src="https://app.yinxiang.com/FileSharing.action?hash=1/c523ac453ead8a619eb11a7628276ae4-21817" alt=""></p>
</li>
<li><p>分支/合并框架的目的是以递归方式将可以并行的任务拆分成更小的任务，然后将每个子任务的结果合并起来生成整体结果；（多路归并？）</p>
</li>
<li><p>Spliterator 是“可分迭代器”（splitable iterator），用于遍历数据源中的元素，并行化遍历；</p>
</li>
</ol>
</li>
</ol>
<h1 id="Java-amp-函数式编程"><a href="#Java-amp-函数式编程" class="headerlink" title="Java&amp;函数式编程"></a>Java&amp;函数式编程</h1><h2 id="基础知识"><a href="#基础知识" class="headerlink" title="基础知识"></a>基础知识</h2><ol>
<li><p>声明式编程：采用这种“要做什么”风格的编程通常被称为声明式编程，用这种方式编写的代码更加接近问题陈述了；</p>
</li>
<li><p><strong>函数式编程具体实践了声明式编程和无副作用计算</strong>，可以更容易地构建和维护系统；</p>
</li>
<li><p>目标：使用函数式编程，实现更加健壮的程序，还不会有任何的副作用！</p>
</li>
<li><p>在函数式编程的上下文中，一个“函数”对应于一个数学函数：它接受零个或多个参数，生成一个或多个结果，并且不会有任何副作用；</p>
</li>
<li><p>在Java语言中，如果希望编写函数式的程序，首先需要做的是确保没有人能觉察到你代码的副作用；</p>
</li>
<li><p>要被称为函数式，函数或者方法不应该抛出任何异常；</p>
</li>
<li><p>为了各种各样的实战需求，最终可能会发现即便对函数式的代码，还是需要向某些日志文件打印输出调试信息，这意味着严格意义上说，这些代码并非函数式的，但是在实际中享受了函数式程序带来的大多数好处；</p>
</li>
<li><p><strong>函数无论在何处、何时调用，如果使用同样的输入总能持续地得到相同的结果，就具备了函数式的特征</strong>；</p>
</li>
<li><p>两种极端：</p>
<ul>
<li>支持极端的面向对象：任何事物都是对象，程序要么通过更新字段完成操作，要么调用对与它相关的对象进行更新的方法</li>
<li>支持引用透明的函数式编程：认为方法不应该有（对外部可见的）对象修改</li>
</ul>
</li>
<li><p>函数式编程推荐使用递归而不是迭代，虽然递归很消耗资源，但是，函数式语言提供了一种解决该问题的方法：尾调优化（tail-call optimization）：</p>
<ul>
<li><p>可以编写阶乘的一个迭代定义，不过迭代调用发生在函数的最后</p>
</li>
<li><p><strong>Java的尾递归代码与普通递归无异，可能JVM是想在出现异常时更好地输出堆栈信息的缘故</strong>，也导致了Java中一般能用迭代就不用递归，但是这与函数式编程背道而驰</p>
</li>
<li><p>递归：</p>
<p><img src="https://app.yinxiang.com/FileSharing.action?hash=1/202899e4127e7cfbc9a8da77c04d63fc-50130" alt=""></p>
</li>
<li><p>尾递归：</p>
<p><img src="https://app.yinxiang.com/FileSharing.action?hash=1/b5d70777f971a08a86b9c9777c706d46-39054" alt=""></p>
</li>
</ul>
</li>
<li><p>从长远看，减少共享的可变数据结构能帮助你降低维护和调试程序的代价；</p>
</li>
</ol>
<h2 id="编程技巧"><a href="#编程技巧" class="headerlink" title="编程技巧"></a>编程技巧</h2><ol>
<li><p>高阶函数（higher-order function）：（满足任意一个要求）</p>
<ul>
<li>接受至少一个函数作为参数</li>
<li>返回的结果是一个函数</li>
</ul>
</li>
<li><p>科里化：（一种可以帮助你模块化函数、提高代码重用性的技术）</p>
<ul>
<li><p>定义：一种将具备2个参数的函数f转化为使用一个参数的函数g，并且这个函数的返回值也是一个函数，它会作为新函数的一个参数；</p>
</li>
<li><p>样例：</p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line"><span class="function"><span class="keyword">static</span> DoubleUnaryOperator <span class="title">curriedConverter</span><span class="params">(<span class="keyword">double</span> f, <span class="keyword">double</span> b)</span></span>&#123;</span><br><span class="line">        <span class="keyword">return</span> (<span class="keyword">double</span> x) -&gt; x * f + b;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line">DoubleUnaryOperator convertCtoF = curriedConverter(<span class="number">9.0</span>/<span class="number">5</span>, <span class="number">32</span>);</span><br><span class="line"><span class="keyword">double</span> gbp=convertCtoF.applyAsDouble(<span class="number">100</span>);</span><br></pre></td></tr></table></figure>
</li>
</ul>
</li>
<li><p><strong>函数式方法不允许修改任何全局数据结构或者任何作为参数传入的参数</strong>；如果需要使用表示计算结果的数据结果，那么请创建它的一个副本而不要直接修改现存的数据结构；</p>
</li>
<li><p>Java 8的Stream以其延迟性而著称，被刻意设计成这样，即延迟操作：Stream就像是一个黑盒，它接收请求生成结果，当你向一个 Stream发起一系列的操作请求时，这些请求只是被一一保存起来，只有当你向Stream发起一个终端操作时，才会实际地进行计算；</p>
</li>
<li><p><del>（结构式）模式匹配能够有效减少代码的逻辑混乱的情况；</del></p>
</li>
<li><p>Java加入了对通配符的支持，来更灵活地支持泛型的子类型：</p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">List&lt;? extends Number&gt; numbers = <span class="keyword">new</span> ArrayList&lt;Integer&gt;();</span><br></pre></td></tr></table></figure>

</li>
</ol>
<hr>
<h1 id="随心"><a href="#随心" class="headerlink" title="随心"></a>随心</h1><p>先抢占市场往往能够吓退竞争对手！产品战略可以先占领大学市场，毕业生随后会把它带进业界。语言需要不断改进以跟进硬件的更新或满足程序员的期待，变化需要有意义，被接受，那变化才是有价值的变化！</p>

      
    </div>
    
    
    

    

    
      <div>
        <div style="padding: 10px 0; margin: 20px auto; width: 90%; text-align: center;">
  <div>坚持原创技术分享，您的支持将鼓励我继续创作！</div>
  <button id="rewardButton" disable="enable" onclick="var qr = document.getElementById('QR'); if (qr.style.display === 'none') {qr.style.display='block';} else {qr.style.display='none'}">
    <span>打赏</span>
  </button>
  <div id="QR" style="display: none;">

    
      <div id="wechat" style="display: inline-block">
        <img id="wechat_qr" src="/images/wechat_pay.jpg" alt="WanderROS 微信支付"/>
        <p>微信支付</p>
      </div>
    

    
      <div id="alipay" style="display: inline-block">
        <img id="alipay_qr" src="/images/alipay.jpg" alt="WanderROS 支付宝"/>
        <p>支付宝</p>
      </div>
    

    

  </div>
</div>

      </div>
    

    

<div>
      
        
<div class="my_post_copyright">
  <script src="//cdn.bootcss.com/clipboard.js/1.5.10/clipboard.min.js"></script>
  
  <!-- JS库 sweetalert 可修改路径 -->
  <script src="https://cdn.bootcss.com/jquery/2.0.0/jquery.min.js"></script>
  <script src="https://unpkg.com/sweetalert/dist/sweetalert.min.js"></script>
  <p><span>本文标题:</span><a href="/2020/05/17/Java-Base-0/">Java Base_0</a></p>
  <p><span>文章作者:</span><a href="/" title="访问 WanderROS 的个人博客">WanderROS</a></p>
  <p><span>发布时间:</span>2020年05月17日 - 09:23</p>
  <p><span>最后更新:</span>2020年10月01日 - 16:52</p>
  <p><span>原始链接:</span><a href="/2020/05/17/Java-Base-0/" title="Java Base_0">https://wanderros.github.io/2020/05/17/Java-Base-0/</a>
    <span class="copy-path"  title="点击复制文章链接"><i class="fa fa-clipboard" data-clipboard-text="https://wanderros.github.io/2020/05/17/Java-Base-0/"  aria-label="复制成功！"></i></span>
  </p>
  <p><span>许可协议:</span><i class="fa fa-creative-commons"></i> <a rel="license" href="https://creativecommons.org/licenses/by-nc-nd/4.0/" target="_blank" title="Attribution-NonCommercial-NoDerivatives 4.0 International (CC BY-NC-ND 4.0)">署名-非商业性使用-禁止演绎 4.0 国际</a> 转载请保留原文链接及作者。</p>  
</div>
<script> 
    var clipboard = new Clipboard('.fa-clipboard');
      $(".fa-clipboard").click(function(){
      clipboard.on('success', function(){
        swal({   
          title: "",   
          text: '复制成功',
          icon: "success", 
          showConfirmButton: true
          });
        });
    });  
</script>


      
</div>

<div>
  
    <div>
    
        <div style="text-align:center;color: #ccc;font-size:14px;">-------------本文结束<i class="fa fa-paw"></i>感谢您的阅读-------------</div>
    
</div>

  
</div>

    <footer class="post-footer">
      
        <div class="post-tags">
          
            <a href="/tags/Java/" rel="tag"><i class="fa fa-tag"></i> Java</a>
          
        </div>
      

      
      
      

      
        <div class="post-nav">
          <div class="post-nav-next post-nav-item">
            
              <a href="/2020/05/16/Java%E6%B3%A8%E8%A7%A3%EF%BC%88Annotation%EF%BC%89/" rel="next" title="Java注解（Annotation）">
                <i class="fa fa-chevron-left"></i> Java注解（Annotation）
              </a>
            
          </div>

          <span class="post-nav-divider"></span>

          <div class="post-nav-prev post-nav-item">
            
              <a href="/2020/05/17/Python-Network-Quick-Start/" rel="prev" title="Python Network Quick Start">
                Python Network Quick Start <i class="fa fa-chevron-right"></i>
              </a>
            
          </div>
        </div>
      

      
      
    </footer>
  </div>
  
  
  
  </article>
<div>
		
    	<!-- Link Gitalk 的支持文件  -->
	<link rel="stylesheet" href="https://unpkg.com/gitalk/dist/gitalk.css">
	<script src="https://unpkg.com/gitalk@latest/dist/gitalk.min.js"></script> 
	<div id="gitalk-container"></div>     <script type="text/javascript">
		var gitalk = new Gitalk({
			clientID: 'bd073c3374c2b1a924b0',
			clientSecret: 'e3818342fe0fa0f03ab0997cfe81ae9c450ec954',
			repo: 'wanderros.github.io',
			owner: 'WanderROS',
			admin: ['WanderROS'],
			id: location.pathname,
			distractionFreeMode: 'true'
		});
		gitalk.render('gitalk-container');
	</script> 
	<!-- Gitalk end -->

		
	</div>


    <div class="post-spread">
      
    </div>
  </div>


          </div>
          


          

  
 <div id="gitalk-container"></div>

  



        </div>
        
          
  
  <div class="sidebar-toggle">
    <div class="sidebar-toggle-line-wrap">
      <span class="sidebar-toggle-line sidebar-toggle-line-first"></span>
      <span class="sidebar-toggle-line sidebar-toggle-line-middle"></span>
      <span class="sidebar-toggle-line sidebar-toggle-line-last"></span>
    </div>
  </div>

  <aside id="sidebar" class="sidebar">
    
    <div class="sidebar-inner">

      

      
        <ul class="sidebar-nav motion-element">
          <li class="sidebar-nav-toc sidebar-nav-active" data-target="post-toc-wrap">
            文章目录
          </li>
          <li class="sidebar-nav-overview" data-target="site-overview-wrap">
            站点概览
          </li>
        </ul>
      

      <section class="site-overview-wrap sidebar-panel">
        <div class="site-overview">
          <div class="site-author motion-element" itemprop="author" itemscope itemtype="http://schema.org/Person">
            
              <img class="site-author-image" itemprop="image"
                src="/images/avatar.jpg"
                alt="WanderROS" />
            
              <p class="site-author-name" itemprop="name">WanderROS</p>
              <p class="site-description motion-element" itemprop="description"></p>
          </div>

          <nav class="site-state motion-element">

            
              <div class="site-state-item site-state-posts">
              
                <a href="/archives%7C%7C%20archive">
              
                  <span class="site-state-item-count">145</span>
                  <span class="site-state-item-name">日志</span>
                </a>
              </div>
            

            
              
              
              <div class="site-state-item site-state-categories">
                <a href="/categories/index.html">
                  <span class="site-state-item-count">32</span>
                  <span class="site-state-item-name">分类</span>
                </a>
              </div>
            

            
              
              
              <div class="site-state-item site-state-tags">
                <a href="/tags/index.html">
                  <span class="site-state-item-count">69</span>
                  <span class="site-state-item-name">标签</span>
                </a>
              </div>
            

          </nav>

          
            <div class="feed-link motion-element">
              <a href="/atom.xml" rel="alternate">
                <i class="fa fa-rss"></i>
                RSS
              </a>
            </div>
          

          
            <div class="links-of-author motion-element">
                
                  <span class="links-of-author-item">
                    <a href="https://github.com/wanderROS" target="_blank" title="GitHub">
                      GitHub</a>
                  </span>
                
                  <span class="links-of-author-item">
                    <a href="mailto:1194409532@qq.com.com" target="_blank" title="E-Mail">
                      E-Mail</a>
                  </span>
                
            </div>
          

          
          

          
          

          

        </div>
      </section>

      
      <!--noindex-->
        <section class="post-toc-wrap motion-element sidebar-panel sidebar-panel-active">
          <div class="post-toc">

            
              
            

            
              <div class="post-toc-content"><ol class="nav"><li class="nav-item nav-level-1"><a class="nav-link" href="#简介"><span class="nav-number">1.</span> <span class="nav-text">简介</span></a></li><li class="nav-item nav-level-1"><a class="nav-link" href="#开始"><span class="nav-number">2.</span> <span class="nav-text">开始</span></a><ol class="nav-child"><li class="nav-item nav-level-2"><a class="nav-link" href="#注释"><span class="nav-number">2.1.</span> <span class="nav-text">注释</span></a></li><li class="nav-item nav-level-2"><a class="nav-link" href="#public-class-amp-class"><span class="nav-number">2.2.</span> <span class="nav-text">public class &amp;class</span></a></li><li class="nav-item nav-level-2"><a class="nav-link" href="#数据类型"><span class="nav-number">2.3.</span> <span class="nav-text">数据类型</span></a></li><li class="nav-item nav-level-2"><a class="nav-link" href="#字符编码"><span class="nav-number">2.4.</span> <span class="nav-text">字符编码</span></a></li><li class="nav-item nav-level-2"><a class="nav-link" href="#方法"><span class="nav-number">2.5.</span> <span class="nav-text">方法</span></a></li><li class="nav-item nav-level-2"><a class="nav-link" href="#Java8"><span class="nav-number">2.6.</span> <span class="nav-text">Java8</span></a></li><li class="nav-item nav-level-2"><a class="nav-link" href="#Lambda"><span class="nav-number">2.7.</span> <span class="nav-text">Lambda</span></a></li><li class="nav-item nav-level-2"><a class="nav-link" href="#高效Java-8-编程"><span class="nav-number">2.8.</span> <span class="nav-text">高效Java 8 编程</span></a></li><li class="nav-item nav-level-2"><a class="nav-link" href="#日期和时间API"><span class="nav-number">2.9.</span> <span class="nav-text">日期和时间API</span></a></li><li class="nav-item nav-level-2"><a class="nav-link" href="#Optional-amp-null"><span class="nav-number">2.10.</span> <span class="nav-text">Optional&amp;null</span></a></li></ol></li><li class="nav-item nav-level-1"><a class="nav-link" href="#流"><span class="nav-number">3.</span> <span class="nav-text">流</span></a><ol class="nav-child"><li class="nav-item nav-level-2"><a class="nav-link" href="#流的认识"><span class="nav-number">3.1.</span> <span class="nav-text">流的认识</span></a></li><li class="nav-item nav-level-2"><a class="nav-link" href="#流操作"><span class="nav-number">3.2.</span> <span class="nav-text">流操作</span></a></li><li class="nav-item nav-level-2"><a class="nav-link" href="#用流收集数据"><span class="nav-number">3.3.</span> <span class="nav-text">用流收集数据</span></a></li><li class="nav-item nav-level-2"><a class="nav-link" href="#并行数据处理"><span class="nav-number">3.4.</span> <span class="nav-text">并行数据处理</span></a></li></ol></li><li class="nav-item nav-level-1"><a class="nav-link" href="#Java-amp-函数式编程"><span class="nav-number">4.</span> <span class="nav-text">Java&amp;函数式编程</span></a><ol class="nav-child"><li class="nav-item nav-level-2"><a class="nav-link" href="#基础知识"><span class="nav-number">4.1.</span> <span class="nav-text">基础知识</span></a></li><li class="nav-item nav-level-2"><a class="nav-link" href="#编程技巧"><span class="nav-number">4.2.</span> <span class="nav-text">编程技巧</span></a></li></ol></li><li class="nav-item nav-level-1"><a class="nav-link" href="#随心"><span class="nav-number">5.</span> <span class="nav-text">随心</span></a></li></ol></div>
            

          </div>
        </section>
      <!--/noindex-->
      

      

    </div>
  </aside>


        
      </div>
    </main>

    <footer id="footer" class="footer">
      <div class="footer-inner">
        <script async src="https://busuanzi.ibruce.info/busuanzi/2.3/busuanzi.pure.mini.js"></script>
<div class="copyright">&copy; <span itemprop="copyrightYear">2020</span>
  <span class="with-love">
    <i class="fa fa-user"></i>
  </span>
  <span class="author" itemprop="copyrightHolder">WanderROS</span>

  
</div>

<div class="powered-by">
<i class="fa fa-user-md"></i><span id="busuanzi_container_site_uv">
  本站访客数:<span id="busuanzi_value_site_uv"></span>
</span>
</div>
<!--

  <div class="powered-by">由 <a class="theme-link" target="_blank" href="https://hexo.io">Hexo</a> 强力驱动</div>



  <span class="post-meta-divider">|</span>



  <div class="theme-info">主题 &mdash; <a class="theme-link" target="_blank" href="https://github.com/iissnan/hexo-theme-next">NexT.Mist</a> v5.1.4</div>


-->
<div class="theme-info">
  <div class="powered-by"></div>
  <span class="post-count">博客全站共379.7k字</span>
</div>

        







        
      </div>
    </footer>

    
      <div class="back-to-top">
        <i class="fa fa-arrow-up"></i>
        
          <span id="scrollpercent"><span>0</span>%</span>
        
      </div>
    

    

  </div>

<script type="text/javascript" src="//cdn.bootcss.com/canvas-nest.js/1.0.0/canvas-nest.min.js"></script>

  

<script type="text/javascript">
  if (Object.prototype.toString.call(window.Promise) !== '[object Function]') {
    window.Promise = null;
  }
</script>









  


  











  
  
    <script type="text/javascript" src="/lib/jquery/index.js?v=2.1.3"></script>
  

  
  
    <script type="text/javascript" src="/lib/fastclick/lib/fastclick.min.js?v=1.0.6"></script>
  

  
  
    <script type="text/javascript" src="/lib/jquery_lazyload/jquery.lazyload.js?v=1.9.7"></script>
  

  
  
    <script type="text/javascript" src="/lib/velocity/velocity.min.js?v=1.2.1"></script>
  

  
  
    <script type="text/javascript" src="/lib/velocity/velocity.ui.min.js?v=1.2.1"></script>
  

  
  
    <script type="text/javascript" src="/lib/fancybox/source/jquery.fancybox.pack.js?v=2.1.5"></script>
  

  
  
    <script type="text/javascript" src="/lib/canvas-nest/canvas-nest.min.js"></script>
  


  


  <script type="text/javascript" src="/js/src/utils.js?v=5.1.4"></script>

  <script type="text/javascript" src="/js/src/motion.js?v=5.1.4"></script>



  
  

  
  <script type="text/javascript" src="/js/src/scrollspy.js?v=5.1.4"></script>
<script type="text/javascript" src="/js/src/post-details.js?v=5.1.4"></script>



  


  <script type="text/javascript" src="/js/src/bootstrap.js?v=5.1.4"></script>



  


  




	





  





  













  

  <script type="text/javascript">
    // Popup Window;
    var isfetched = false;
    var isXml = true;
    // Search DB path;
    var search_path = "search.xml";
    if (search_path.length === 0) {
      search_path = "search.xml";
    } else if (/json$/i.test(search_path)) {
      isXml = false;
    }
    var path = "/" + search_path;
    // monitor main search box;

    var onPopupClose = function (e) {
      $('.popup').hide();
      $('#local-search-input').val('');
      $('.search-result-list').remove();
      $('#no-result').remove();
      $(".local-search-pop-overlay").remove();
      $('body').css('overflow', '');
    }

    function proceedsearch() {
      $("body")
        .append('<div class="search-popup-overlay local-search-pop-overlay"></div>')
        .css('overflow', 'hidden');
      $('.search-popup-overlay').click(onPopupClose);
      $('.popup').toggle();
      var $localSearchInput = $('#local-search-input');
      $localSearchInput.attr("autocapitalize", "none");
      $localSearchInput.attr("autocorrect", "off");
      $localSearchInput.focus();
    }

    // search function;
    var searchFunc = function(path, search_id, content_id) {
      'use strict';

      // start loading animation
      $("body")
        .append('<div class="search-popup-overlay local-search-pop-overlay">' +
          '<div id="search-loading-icon">' +
          '<i class="fa fa-spinner fa-pulse fa-5x fa-fw"></i>' +
          '</div>' +
          '</div>')
        .css('overflow', 'hidden');
      $("#search-loading-icon").css('margin', '20% auto 0 auto').css('text-align', 'center');

      $.ajax({
        url: path,
        dataType: isXml ? "xml" : "json",
        async: true,
        success: function(res) {
          // get the contents from search data
          isfetched = true;
          $('.popup').detach().appendTo('.header-inner');
          var datas = isXml ? $("entry", res).map(function() {
            return {
              title: $("title", this).text(),
              content: $("content",this).text(),
              url: $("url" , this).text()
            };
          }).get() : res;
          var input = document.getElementById(search_id);
          var resultContent = document.getElementById(content_id);
          var inputEventFunction = function() {
            var searchText = input.value.trim().toLowerCase();
            var keywords = searchText.split(/[\s\-]+/);
            if (keywords.length > 1) {
              keywords.push(searchText);
            }
            var resultItems = [];
            if (searchText.length > 0) {
              // perform local searching
              datas.forEach(function(data) {
                var isMatch = false;
                var hitCount = 0;
                var searchTextCount = 0;
                var title = data.title.trim();
                var titleInLowerCase = title.toLowerCase();
                var content = data.content.trim().replace(/<[^>]+>/g,"");
                var contentInLowerCase = content.toLowerCase();
                var articleUrl = decodeURIComponent(data.url);
                var indexOfTitle = [];
                var indexOfContent = [];
                // only match articles with not empty titles
                if(title != '') {
                  keywords.forEach(function(keyword) {
                    function getIndexByWord(word, text, caseSensitive) {
                      var wordLen = word.length;
                      if (wordLen === 0) {
                        return [];
                      }
                      var startPosition = 0, position = [], index = [];
                      if (!caseSensitive) {
                        text = text.toLowerCase();
                        word = word.toLowerCase();
                      }
                      while ((position = text.indexOf(word, startPosition)) > -1) {
                        index.push({position: position, word: word});
                        startPosition = position + wordLen;
                      }
                      return index;
                    }

                    indexOfTitle = indexOfTitle.concat(getIndexByWord(keyword, titleInLowerCase, false));
                    indexOfContent = indexOfContent.concat(getIndexByWord(keyword, contentInLowerCase, false));
                  });
                  if (indexOfTitle.length > 0 || indexOfContent.length > 0) {
                    isMatch = true;
                    hitCount = indexOfTitle.length + indexOfContent.length;
                  }
                }

                // show search results

                if (isMatch) {
                  // sort index by position of keyword

                  [indexOfTitle, indexOfContent].forEach(function (index) {
                    index.sort(function (itemLeft, itemRight) {
                      if (itemRight.position !== itemLeft.position) {
                        return itemRight.position - itemLeft.position;
                      } else {
                        return itemLeft.word.length - itemRight.word.length;
                      }
                    });
                  });

                  // merge hits into slices

                  function mergeIntoSlice(text, start, end, index) {
                    var item = index[index.length - 1];
                    var position = item.position;
                    var word = item.word;
                    var hits = [];
                    var searchTextCountInSlice = 0;
                    while (position + word.length <= end && index.length != 0) {
                      if (word === searchText) {
                        searchTextCountInSlice++;
                      }
                      hits.push({position: position, length: word.length});
                      var wordEnd = position + word.length;

                      // move to next position of hit

                      index.pop();
                      while (index.length != 0) {
                        item = index[index.length - 1];
                        position = item.position;
                        word = item.word;
                        if (wordEnd > position) {
                          index.pop();
                        } else {
                          break;
                        }
                      }
                    }
                    searchTextCount += searchTextCountInSlice;
                    return {
                      hits: hits,
                      start: start,
                      end: end,
                      searchTextCount: searchTextCountInSlice
                    };
                  }

                  var slicesOfTitle = [];
                  if (indexOfTitle.length != 0) {
                    slicesOfTitle.push(mergeIntoSlice(title, 0, title.length, indexOfTitle));
                  }

                  var slicesOfContent = [];
                  while (indexOfContent.length != 0) {
                    var item = indexOfContent[indexOfContent.length - 1];
                    var position = item.position;
                    var word = item.word;
                    // cut out 100 characters
                    var start = position - 20;
                    var end = position + 80;
                    if(start < 0){
                      start = 0;
                    }
                    if (end < position + word.length) {
                      end = position + word.length;
                    }
                    if(end > content.length){
                      end = content.length;
                    }
                    slicesOfContent.push(mergeIntoSlice(content, start, end, indexOfContent));
                  }

                  // sort slices in content by search text's count and hits' count

                  slicesOfContent.sort(function (sliceLeft, sliceRight) {
                    if (sliceLeft.searchTextCount !== sliceRight.searchTextCount) {
                      return sliceRight.searchTextCount - sliceLeft.searchTextCount;
                    } else if (sliceLeft.hits.length !== sliceRight.hits.length) {
                      return sliceRight.hits.length - sliceLeft.hits.length;
                    } else {
                      return sliceLeft.start - sliceRight.start;
                    }
                  });

                  // select top N slices in content

                  var upperBound = parseInt('1');
                  if (upperBound >= 0) {
                    slicesOfContent = slicesOfContent.slice(0, upperBound);
                  }

                  // highlight title and content

                  function highlightKeyword(text, slice) {
                    var result = '';
                    var prevEnd = slice.start;
                    slice.hits.forEach(function (hit) {
                      result += text.substring(prevEnd, hit.position);
                      var end = hit.position + hit.length;
                      result += '<b class="search-keyword">' + text.substring(hit.position, end) + '</b>';
                      prevEnd = end;
                    });
                    result += text.substring(prevEnd, slice.end);
                    return result;
                  }

                  var resultItem = '';

                  if (slicesOfTitle.length != 0) {
                    resultItem += "<li><a href='" + articleUrl + "' class='search-result-title'>" + highlightKeyword(title, slicesOfTitle[0]) + "</a>";
                  } else {
                    resultItem += "<li><a href='" + articleUrl + "' class='search-result-title'>" + title + "</a>";
                  }

                  slicesOfContent.forEach(function (slice) {
                    resultItem += "<a href='" + articleUrl + "'>" +
                      "<p class=\"search-result\">" + highlightKeyword(content, slice) +
                      "...</p>" + "</a>";
                  });

                  resultItem += "</li>";
                  resultItems.push({
                    item: resultItem,
                    searchTextCount: searchTextCount,
                    hitCount: hitCount,
                    id: resultItems.length
                  });
                }
              })
            };
            if (keywords.length === 1 && keywords[0] === "") {
              resultContent.innerHTML = '<div id="no-result"><i class="fa fa-search fa-5x" /></div>'
            } else if (resultItems.length === 0) {
              resultContent.innerHTML = '<div id="no-result"><i class="fa fa-frown-o fa-5x" /></div>'
            } else {
              resultItems.sort(function (resultLeft, resultRight) {
                if (resultLeft.searchTextCount !== resultRight.searchTextCount) {
                  return resultRight.searchTextCount - resultLeft.searchTextCount;
                } else if (resultLeft.hitCount !== resultRight.hitCount) {
                  return resultRight.hitCount - resultLeft.hitCount;
                } else {
                  return resultRight.id - resultLeft.id;
                }
              });
              var searchResultList = '<ul class=\"search-result-list\">';
              resultItems.forEach(function (result) {
                searchResultList += result.item;
              })
              searchResultList += "</ul>";
              resultContent.innerHTML = searchResultList;
            }
          }

          if ('auto' === 'auto') {
            input.addEventListener('input', inputEventFunction);
          } else {
            $('.search-icon').click(inputEventFunction);
            input.addEventListener('keypress', function (event) {
              if (event.keyCode === 13) {
                inputEventFunction();
              }
            });
          }

          // remove loading animation
          $(".local-search-pop-overlay").remove();
          $('body').css('overflow', '');

          proceedsearch();
        }
      });
    }

    // handle and trigger popup window;
    $('.popup-trigger').click(function(e) {
      e.stopPropagation();
      if (isfetched === false) {
        searchFunc(path, 'local-search-input', 'local-search-result');
      } else {
        proceedsearch();
      };
    });

    $('.popup-btn-close').click(onPopupClose);
    $('.popup').click(function(e){
      e.stopPropagation();
    });
    $(document).on('keyup', function (event) {
      var shouldDismissSearchPopup = event.which === 27 &&
        $('.search-popup').is(':visible');
      if (shouldDismissSearchPopup) {
        onPopupClose();
      }
    });
  </script>





  

  

  

  
  

  

  

  

<script src="/live2dw/lib/L2Dwidget.min.js?094cbace49a39548bed64abff5988b05"></script><script>L2Dwidget.init({"log":false,"pluginJsPath":"lib/","pluginModelPath":"assets/","pluginRootPath":"live2dw/","tagMode":false});</script></body>
</html>
<!--崩溃欺骗-->
<script type="text/javascript" src="/js/src/crash_cheat.js"></script>
